<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Add Invoice</title>
</head>

<body>
  <h1>Project `Add Invoice`: Demo !</h1><br>

  <form action="/InvoiceList" method="POST">

    &nbsp; Name: &nbsp;<input type="text" name="fullname" required="true"><br><br><br> 
    &nbsp; Email: &nbsp;<input type="text" name="emailId"><br><br><br> 
    &nbsp; Due Date: &nbsp;<input type="date" name="datePicker"><br><br><br><br>

    &nbsp;&nbsp;<label for="item info"><b>Item description:</b> </label>

    &nbsp;&nbsp;&nbsp;<label for="item amount"><b>Amount:</b> </label>

    <table id="tbl">
      <tr>
        <td> <input type="text" name="item_info"></td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <td> <input class="amount" name="amount" type="number" onblur="updatesum()"></td>
      </tr>
    </table><br>
    &nbsp;<input type="button" name="Submit" value="Add more items" onclick="createNewRows()"/><br><br><br><br>

    &nbsp;&nbsp;&nbsp;<label for="total amount"><b>TOTAL:</b> </label> &nbsp;&nbsp;<input type="number" id = "result" name="total_amount" value="0" readonly><br><br><br>

    &nbsp;&nbsp;&nbsp;<button type="submit" style="font-size:10pt;color:white;
    background-color:green;border:2px solid #336600;padding:5px;">Send Invoice</button>
  </form>
  </form>

  <script>
    function createNewRows() {
      var row = '';
      row = "<td> <input type ='text' name='item_info'/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<td> <input class='amount' name='amount' type='number'  onblur='updatesum()'/>";
      var table = document.getElementById("tbl");
      var total_rows = table.rows.length;
      let tr = document.createElement("tr");
      tr.innerHTML = row;
      table.appendChild(tr);
      return false;e
    }
    
    function updatesum() {
      var sum = 0;
      const elements = document.querySelectorAll(".amount");
      for(var i=0;i< elements.length;i++) {
        sum += parseInt(elements[i].value);
      };

    document.getElementById("result").value = sum;
    }
  </script>

</body>

</html>